---
name: workflow-orchestration
description: |
  Оркестрація ланцюжків навичок і маршрутизація запитів.
  CRITICAL RULE: Ти ЗОБОВ'ЯЗАНИЙ використовувати view_file для c:\Antigarvity_workspace\.agent\skills\workflow-orchestration\SKILL.md та c:\Antigarvity_workspace\.agent\skills\memory-manager\SKILL.md на початку будь-якої сесії або при отриманні команди /db!
---

# Навичка: Оркестрація Робочих Процесів (Workflow Orchestration)

Ти маєш здатність керувати власними навичками та визначати правильну їх послідовність для виконання складних складних задач користувача. Ця навичка — твій "командний центр" для маршрутизації багатоетапних запитів.

## Наскрізне Правило Пам'яті (Memory Manager)

Навичка `memory-manager` — це наскрізний процес, який супроводжує ВСЮ твою змістовну роботу:
- **Початок роботи:** Якщо користувач не ініціював `/db` сам — нагадай йому: "Хочете розпочати сесію (`/db`), щоб зберегти контекст цієї роботи?"
- **Під час роботи:** Після кожного значущого етапу (завершення інтерв'ю, створення плану, написання коду) — запропонуй зберегти проміжний результат через `/sa`.
- **Завершення:** Перед закінченням діалогу — запропонуй фіналізувати сесію через `/ss`.

> [!CAUTION]
> **КРИТИЧНО:** Не забувай про активацію memory-manager для фіксації результату роботи інших навичок. Це найчастіша помилка.

## Ланцюжки Навичок (Skill Chains)

Ти маєш комбінувати інструменти у визначені "пайплайни" залежно від типу задачі. 

### Сценарій 1: Новий проект / продукт / велика фіча

Ефективний ланцюжок: `discovery-interview` → `project-planner` → Розробка (кодинг)

1. **`discovery-interview`** — Дослідити вимоги, з'ясувати контекст розробки, створити детальну специфікацію.
2. **`project-planner`** — На основі специфікації зробити декомпозицію на задачі, фази, та визначити таймлайни.
3. **Розробка** — Писати код суворо відповідно до затвердженого плану.

### Сценарій 2: Створення або глобальне оновлення навички (Skill)

Ефективний ланцюжок: `discovery-interview` → `project-planner` → `skill-creator`

1. **`discovery-interview`** — Зрозуміти, що саме навичка повинна робити, як інтегруватися, для кого вона, які ресурси та протоколи потрібні.
2. **`project-planner`** — Спланувати архітектуру навички (структуру папок), визначити файли та залежності скриптів.
3. **`skill-creator`** — Виконати генерацію кінцевих файлів та ресурсів за планом.

### Сценарій 3: Покращення існуючого (рефакторинг, баг-фікс, міні-фіча)

Якщо задача чітка і зрозуміла — НЕ потрібен повний ланцюжок, застосовуй скорочений підхід:
- Якщо є сумніви щодо обсягу робіт → `discovery-interview` (скорочений формат).
- Якщо обсяг дійсно зрозумілий, але задача має понад дві складові → `project-planner`.
- Якщо задача атомарна і проста → одразу переходь до роботи.

### Сценарій 4: Архітектура та оптимізація GraphRAG / Систем пам'яті

Ефективний ланцюжок: `discovery-interview` → `graphrag-system-design` → Розробка

1. **`discovery-interview`** — З'ясувати обмеження, домен та задачі майбутньої системи знань.
2. **`graphrag-system-design`** — Спроектувати схему графа, визначити налаштування LLM, стратегії витягу (extraction) та RAG-конвеєр.
3. **Розробка** — Імплементація згідно зі схемою (наприклад, оновлення `memory-manager`).

### Сценарій 5: Аудит якості та галюцинацій в Графі (KG)

Діє як незалежна навичка або фаза QA: `graphrag-evaluation`

1. **`graphrag-evaluation`** — Проведення тестів на повноту графа, якість пошукових метрик (Precision/Recall), та аналіз "health" бази даних Grynya (FalkorDB).

### Сценарій 6: Простий запит або питання

Не потребує ланцюжка — відповідай напряму.

## Жорсткі Правила Маршрутизації (Guardrails)

1. **НІКОЛИ** не переходь до формального `project-planner` без затвердженої специфікації (яка має бути або результатом `discovery-interview`, або надана користувачем напряму).
2. **НІКОЛИ** не починай створювати навичку через `skill-creator` без чіткого розуміння того, що саме вона має робити.
3. Якщо користувач каже абстрактне "зроби проект" / "в мене є ідея" / "хочу побудувати" — негайно ініціюй `discovery-interview`.
4. Якщо користувач каже "сплануй" / "розбий на задачі" і в контексті ВЖЕ Є специфікація — активуй `project-planner`.
5. Якщо специфікації немає для будь-якої великої дії — спершу запитай або запусти процес її конструювання (`discovery-interview`).
